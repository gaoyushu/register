$(function(){var s=$("#TANGRAM__PSP_4__userName"),e=$("#TANGRAM__PSP_4__userNameTip"),r=$("#TANGRAM__PSP_4__userNameError");s.focus(function(){s.addClass("pass-text-input-focus"),e.attr("style","display:block"),s.removeClass("pass-text-input-error")}),s.blur(function(){s.removeClass("pass-text-input-focus"),e.attr("style","display:none");var t=a(s.val());t&&(r.attr("style","display:inline"),s.addClass("pass-text-input-error")),r.html(t),m()});var a=function(t){if(!t)return"用户名不能为空";var s=/[^\u4E00-\u9FA5\w]/;if(s.test(t))return"用户名仅支持中英文、数字和下划线,且不能为纯数字";if(!(s=/\D/).test(t))return"用户名仅支持中英文、数字和下划线,且不能为纯数字";s=/[\u4e00-\u9fa5]/g;for(var e=0,r=0;r<t.length;r++)s.test(t.split("")[r])?e+=2:e+=1;return 14<e?"用户名不能超过7个汉字或14个字符":""},n=$("#TANGRAM__PSP_4__phone"),i=$("#TANGRAM__PSP_4__phoneError");n.focus(function(){n.addClass("pass-text-input-focus"),n.removeClass("pass-text-input-error")}),n.blur(function(){u(),m()});var u=function(){n.removeClass("pass-text-input-focus");var t=l(n.val());return t&&(i.attr("style","display:inline"),n.addClass("pass-text-input-error")),i.html(t),t},l=function(t){if(!t)return"手机号不能为空";return/^1[3456789]\d{9}$/.test(t)?"":"手机号码格式不正确"},o=$("#TANGRAM__PSP_4__password"),_=$("#TANGRAM__PSP_4__passwordError");o.focus(function(){o.addClass("pass-text-input-focus"),o.removeClass("pass-text-input-error")}),o.blur(function(){o.removeClass("pass-text-input-focus");var t=p(o.val());t&&(_.attr("style","display:inline"),o.addClass("pass-text-input-error")),_.html(t),m()});var p=function(t){if(!t)return"密码不能为空";var s="",e=/(?!^(\d+|[a-zA-Z]+|[~!@#$%^&*?]+)$)^[\w~!@#$%^&*?]/;e.test(t)||(s+="字母/数字以及标点符号至少包含2种 "),(e=/[\u4E00-\u9FA5\s]/).test(t)&&(s+="不允许有空格、中文 ");for(var r=0,a=0;a<t.length;a++)e.test(t.split("")[a])?r+=2:r+=1;return(14<r||r<8)&&(s+="长度为8~14个字符 "),s},d=$("#TANGRAM__PSP_4__verifyCode"),f=$("#TANGRAM__PSP_4__verifyCodeError");d.focus(function(){d.addClass("pass-text-input-focus"),d.removeClass("pass-text-input-error")}),d.blur(function(){d.removeClass("pass-text-input-focus");var t=v(d.val());t&&(f.attr("style","display:inline"),d.addClass("pass-text-input-error")),f.html(t),m()});var v=function(t){if(!t)return"验证码不能为空";return/^\d{6}$/.test(t)?"":"验证码格式不正确"},c=$("#TANGRAM__PSP_4__verifyCodeSend");c.click(function(){if(l(n.val()))u();else{var t=10;c.attr("disabled",!0),c.removeClass("pass-button-verifyCodeSend"),c.addClass("pass-text-input-disabled");var s=setInterval(function(){t<=0?(c.attr("disabled",!1),c.removeClass("pass-text-input-disabled"),c.addClass("pass-button-verifyCodeSend"),c.val("重新获取"),clearInterval(s)):(c.val(t+"s"),t--)},1e3)}});var t=$("#TANGRAM__PSP_4__isAgree"),A=$("#TANGRAM__PSP_4__isAgreeError");t.click(function(){C()?A.attr("style","display:none"):(A.html("请同意相应协议即可注册"),A.attr("style","display:block")),m()});var C=function(){return t.prop("checked")},P=$("#TANGRAM__PSP_4__submit");P.click(function(){m()});var m=function(){return a(s.val())||l(n.val())||p(o.val())||v(d.val())||!C()?(P.attr("disabled",!0),P.removeClass("pass-button-new-submit"),!1):(P.attr("disabled",!1),P.addClass("pass-button-new-submit"),!0)}});