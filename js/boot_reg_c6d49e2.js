!function(o,t){"use strict";function e(t){this.width=t.width,this.height=t.height,this.mask=t.mask,this.titleText=t.titleText,this.content=t.content,this.onRender=t.onRender||function(){},this.num=Math.floor(1e3*Math.random()),this.init()}t.require,e.prototype.init=function(){this.mask&&this.createMask(),this.createBody()},e.prototype.createMask=function(){var t=Math.max(document.documentElement.scrollHeight,window.screen.height,document.body.scrollHeight);this.maskDom=o('<div class="mod-layer" id="pass-'+this.num+'"></div>'),o("body").append(this.maskDom),this.maskDom.height(t)},e.prototype.show=function(){this.mask&&this.maskDom.show(),this.domBody.show()},e.prototype.hide=function(){this.mask&&this.maskDom.hide(),this.domBody.hide()},e.prototype.remove=function(){this.mask&&this.maskDom.remove(),this.domBody.remove()},e.prototype.createBody=function(){this.domBody=o('<div class="mod-layer-body" id="pass-content'+this.num+'"><div class="mod-layer-body-title"><span>'+this.titleText+'</span><a id="close-'+this.num+'" href="###"></a></div><div class="mod-layer-content"><div class="mod-layer-main"></div></div></div>'),o("body").append(this.domBody),this.domBody.css({width:this.width,height:this.height,marginLeft:"-"+parseInt(this.width)/2+"px",marginTop:"-"+parseInt(this.height)/2+"px"});var t=this.domBody.children(".mod-layer-content");t.height(this.height-this.domBody.children(".mod-layer-body-title").height()),this.content&&(t.children(".mod-layer-main").append(this.content),this.show()),this.bind(),this.onRender(this)},e.prototype.setContent=function(t){this.domBody.append(t),this.show()},e.prototype.bind=function(){var e=this;o("#close-"+this.num).on("click",function(t){e.hide(),t.preventDefault()})},t.define("module/layer",e)}(baidu,window.Pass),function(o,t){"use strict";function n(){s.visible&&s.hide()}function i(){s=new e}var s,e=(t.require,t.require("ui/dialog/confirm")),a={showConfirm:function(t,e){return o.isNumber(e)&&setTimeout(n,e),s||i(),t&&s.setContent(t),s.show()},setEle:function(t){s||i(),s.setTmpl(t)}};t.define("module/dialog",a)}(baidu,window.Pass),function(c,t){"use strict";var e=((0,t.require)("module/dialog"),function(t){this.config=t});e.prototype={render:function(){this._schoolPannel=new Pass.module.layer({titleText:"选择学校",width:600,height:398,mask:!0,content:'<div class="dialog_parent" id="school_pannel"></div>'}),this.initSchool()},initSchool:function(){var n=this;c.sio.callByServer("https://passport.baidu.com/v2/api/?ucentertownlist&type=2",function(t){if("110000"==t.errno){var o='<div class="all_city">';c.each(t.data,function(t,e){o+='<span class="city j_city" data="'+t+'">'+e+"</span>"}),o+='</div><div class="all_school j_all_school"></div>',n._initSchoolFlag||(n._initSchoolFlag=!0,document.getElementById("school_pannel").innerHTML=o,n.initprovince("120001"),c("#school_pannel").find(".j_city").each(function(){c(this).on("click",function(t){var e=c(t.target).attr("data");e&&(c("#school_pannel").find(".j_all_school").html('<img src="/static/passpc-account/img/loading.gif" /> <span>加载中，请稍后...</span>'),n.initprovince(e))})}))}})},initprovince:function(t){var n=this,e="https://passport.baidu.com/v2/api/?ucentereducationlist&grade=5&province="+t;c.sio.callByServer(e,function(t){if("110000"==t.errno){var o="";""!=t.data?c.each(t.data,function(t,e){o+='<span class="city j_school" data="'+t+'">'+e+"</span>"}):o+='<span class="empty">暂时没有该地的数据</span>',c("#school_pannel").find(".j_all_school").empty(),c(o).appendTo(c("#school_pannel").find(".j_all_school"))}c("#school_pannel").find(".j_school").each(function(){c(this).on("click",function(t){var e=c(t.target).attr("data"),o=c(t.target).html();e&&(n.fire("selectSchool",{schoolCode:e,schoolName:o}),n.hide())})})})},show:function(){this._schoolPannel?this._schoolPannel.show():this.render(),this.fire("showSchool")},hide:function(){this._schoolPannel.hide(),this.fire("hideSchool")},on:function(t,e){if(!c.isFunction(e))return this;var o=this._listeners_;return o||(o=this._listeners_={}),t.indexOf("on")&&(t="on"+t),c.isArray(o[t])||(o[t]=[]),o[t].unshift({handler:e}),this},fire:function(t,e){t=t&&new function(t,e){this.type=t,this.returnValue=!0,this.target=e||null,this.currentTarget=null,this.preventDefault=function(){this.returnValue=!1}}(t);var o,n,i,s=this._listeners_,a=t.type,l=[t].concat(Array.prototype.slice.call(arguments,1));if(s||(s=this._listeners_={}),c.extend(t,e||{}),t.target=t.target||this,t.currentTarget=this,a.indexOf("on")&&(a="on"+a),c.isFunction(this[a])&&this[a].apply(this,l),(o=this._options)&&c.isFunction(o[a])&&o[a].apply(this,l),c.isArray(n=s[a]))for(o=n.length-1;-1<o;o--)(i=n[o])&&i.handler.apply(this,l),i&&i.once&&n.splice(o,1);return t.returnValue}},t.define("module/regSchool",e)}(baidu,window.Pass),function(c,r){window.TPL2LOGOURL&&r.options&&r.options.product in window.TPL2LOGOURL&&(c(".mod-header a").attr({href:window.TPL2LOGOURL[r.options.product].url}),c(".mod-header img").attr({src:window.TPL2LOGOURL[r.options.product].logo})),c(".mod-header a").css({display:"block"});function e(t){if(r.isSchoolReg){function o(){c(n.getElement("school_placeholder")).hide(),c(n.getElement("school")).removeClass("pass-text-input-error"),c(n.getElement("schoolError")).hide(),c(n.getElement("schoolSucc")).show()}var n=t,e=new Pass.module.regSchool;e.on("selectSchool",function(t,e){n.getElement("school").value=e.schoolName,o()});var i=n.tangram_guid+"__",s='<p id="'+i+'schoolWrapper" class="pass-form-item pass-form-item-school" style="display:block"><label for="'+i+'school" id="'+i+'schoolLabel" class="pass-label pass-label-school">学校</label><input id="'+i+'school" type="text" name="passport_college_0_school_name" class="pass-text-input pass-text-input-school" autocomplete="off"><span id="'+i+'schoolError" class="pass-item-error pass-item-error-school" style="display: none;">请选择学校</span><span id="'+i+'schoolSucc" class="pass-item-succ pass-item-succ-school" style="display: none;"></span><span id="'+i+'school_placeholder" class="pass-placeholder pass-placeholder-school" style="display: none;">请选择学校</span></p>';c(n.getElement("passwordWrapper")).after(s),c(n.getElement("school")).on("focus",function(){e.show()}),c(n.getElement("school")).on("keyup",function(t){t.preventDefault()}),c(n.getElement("school")).on("keydown",function(t){t.preventDefault()}),c(n.getElement("form")).on("submit",function(){n.getElement("school").value?o():(c(n.getElement("school")).addClass("pass-text-input-error"),c(n.getElement("schoolError")).show(),c(n.getElement("schoolSucc")).hide())}),a="school",l="请选择学校","placeholder"in document.createElement("input")?c(n.getElement(a)).attr({placeholder:l}):(c(n.getElement(a+"_placeholder")).show(),c(n.getElement(a+"_placeholder")).on("mousedown",function(){n.getElement(a).focus()})),n.on("beforeSubmit",function(t){n.getElement("school").value&&""!=n.getElement("school").value||(t.returnValue=!1)})}var a,l}if(0<baidu("#reg_content").length&&passport.use("reg",{tangram:!0},function(t){normalReg=new t.passport.reg(r.options),normalReg.on("render",function(){var t={phone:/^1[3456789]\d{9}$/,email:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/};r.defaultAccount&&(t.phone.test(r.defaultAccount)||t.email.test(r.defaultAccount))&&(normalReg.getElement("account")&&(normalReg.getElement("account").value=r.defaultAccount),setTimeout(function(){normalReg.getElement("password").focus()},100))}),normalReg.render("reg_content"),e(normalReg)}),0<baidu("#login_btn").length){var o,n=!1;baidu("#login_btn").on("click",function(){if(o||n)o&&o.show();else{n=!0;var t=["qzone","tsina","weixin"],e=1;"0"==r.hasAuthsite&&(t=!1,e=0),baidu.sio.callByBrowser(document.location.protocol+"//passport.baidu.com/passApi/js/uni_login_wrapper.js?v={__fis_timestamp}",function(){(o=passport.pop.init({tangram:!0,cache:!0,loginMerge:!0,staticPage:r.options.staticPage,color:r.options.color,subpro:r.options.subpro,apiOpt:{product:r.options.product,tangram:!1,u:r.options.retu,qrcode:r.options.qrcode,staticPage:r.options.staticPage,sms:e},authsite:t,registerLink:r.options.registerLink})).show()})}})}setTimeout(function(){document.getElementById("mod_feedback")&&(document.getElementById("mod_feedback").href="http://passport.baidu.com/v2/?ucenterfeedback#reg")},1e3)}(baidu,window.Pass);